{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
      "containerGroups_aci_contoso_factory_fxnsysq_plc1_name": {
          "defaultValue": "aci-contoso-factory-fxnsysq-plc1",
          "type": "String"
      }
  },
  "variables": {},
  "resources": [
      {
          "type": "Microsoft.ContainerInstance/containerGroups",
          "apiVersion": "2021-10-01",
          "name": "[parameters('containerGroups_aci_contoso_factory_fxnsysq_plc1_name')]",
          "location": "eastus",
          "properties": {
              "sku": "Standard",
              "containers": [
                  {
                      "name": "[parameters('containerGroups_aci_contoso_factory_fxnsysq_plc1_name')]",
                      "properties": {
                          "image": "mcr.microsoft.com/iotedge/opc-plc:latest",
                          "command": [
                              "/bin/sh",
                              "-c",
                              "[concat('./opcplc --pn=50000 --autoaccept --sph --wp=80 --ctb --scn --lid --lsn --alm --ses --ref --sn=250 --sr=10 --st=uint --fn=50 --fr=1 --ft=uint --ph=', parameters('containerGroups_aci_contoso_factory_fxnsysq_plc1_name'), '.eastus.azurecontainer.io')]"
                          ],
                          "ports": [
                              {
                                  "protocol": "TCP",
                                  "port": 50000
                              },
                              {
                                  "protocol": "TCP",
                                  "port": 80
                              }
                          ],
                          "environmentVariables": [],
                          "resources": {
                              "requests": {
                                  "memoryInGB": 1,
                                  "cpu": 1
                              }
                          }
                      }
                  }
              ],
              "initContainers": [],
              "imageRegistryCredentials": [
                  {
                      "server": "mcr.microsoft.com",
                      "username": "."
                  }
              ],
              "restartPolicy": "Always",
              "ipAddress": {
                  "ports": [
                      {
                          "protocol": "TCP",
                          "port": 50000
                      },
                      {
                          "protocol": "TCP",
                          "port": 80
                      }
                  ],
                  "ip": "52.224.94.39",
                  "type": "Public",
                  "dnsNameLabel": "[parameters('containerGroups_aci_contoso_factory_fxnsysq_plc1_name')]",
                  "autoGeneratedDomainNameLabelScope": "Unsecure"
              },
              "osType": "Linux"
          }
      }
  ]
}